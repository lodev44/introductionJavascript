<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>TP tableau</title>
</head>

<body>
    <div class="container">

    </div>

    <script>
        let data = { "polluant": "CO2", "unite": "milliards de tonnes", "annee": 2017, "pays": [{ "nom": "Chine", "valeur": 9.26, "pourcentage": 28.2, "code": "cn" }, { "nom": "Etats-Unis", "valeur": 4.76, "pourcentage": 14.5, "code": "us" }, { "nom": "Inde", "valeur": 2.16, "pourcentage": 6.6, "code": "in" }, { "nom": "Russie", "valeur": 1.54, "pourcentage": 4.7, "code": "ru" }, { "nom": "Japon", "valeur": 1.13, "pourcentage": 3.4, "code": "jp" }, { "nom": "Allemagne", "valeur": 0.72, "pourcentage": 2.2, "code": "de" }, { "nom": "Corée du Sud", "valeur": 0.6, "pourcentage": 1.8, "code": "kr" }, { "nom": "Iran", "valeur": 0.57, "pourcentage": 1.7, "code": "ir" }, { "nom": "Canada", "valeur": 0.55, "pourcentage": 1.7, "code": "ca" }] };
        let eltContainer = document.querySelector(".container");
        let eltTable = document.createElement("Table");
        eltTable.classList.add("table", "caption-top");
        let eltCaption = document.createElement("caption");
        eltCaption.innerText = "Pays les plus poluants pour le " + data.polluant + "(" + data.unite + ")" + " en " + data.annee;
        eltTable.appendChild(eltCaption);
        let donneesPolutionPays = data.pays;
        // **** Création du thead
        let eltTHead = document.createElement("thead");
        let eltTr = document.createElement("tr");
        // colonne 1
        let eltTh1 = document.createElement("th");
        eltTh1.innerText = "";
        eltTr.appendChild(eltTh1);
        // colonne 2
        let eltTh2 = document.createElement("th");
        eltTh2.innerText = "Nom";
        eltTr.appendChild(eltTh2);
        // colonne 3
        let eltTh3 = document.createElement("th");
        eltTh3.innerText = "Valeur";
        eltTr.appendChild(eltTh3);
        // colonne 4
        let eltTh4 = document.createElement("th");
        eltTh4.innerText = "%";
        eltTr.appendChild(eltTh4);
        // Ajout ligne head
        eltTHead.appendChild(eltTr);
        // Ajout du tr au thead
        eltTable.appendChild(eltTHead);

        donneesPolutionPays.forEach(element => {
            let eltTrDetail = document.createElement("tr");
            // colonne 1
            let eltTh1Det = document.createElement("td");
            eltTh1Det.innerHTML = "<img src=\" https://flagcdn.com/32x24/" + element.code +".png\">";
            eltTrDetail.appendChild(eltTh1Det);
            // colonne 2
            let eltTh2Det = document.createElement("td");
            eltTh2Det.innerText = element.nom;
            eltTrDetail.appendChild(eltTh2Det);
            // colonne 3
            let eltTh3Det = document.createElement("td");
            eltTh3Det.innerText = element.valeur;
            eltTrDetail.appendChild(eltTh3Det);
            // colonne 4
            let eltTh4Det = document.createElement("td");
            eltTh4Det.innerText = element.pourcentage;
            eltTrDetail.appendChild(eltTh4Det);

            eltTable.appendChild(eltTrDetail);
        });
        eltContainer.appendChild(eltTable);


    </script>
</body>

</html>